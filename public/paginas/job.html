<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../estilos/styles.css"/>
    <title>Configurar Pedido - Elo F√°cil</title>
</head>
<body class="sales-body">

  <header id="header">
    <nav>
        <ul>
          <li><a href="../index.html">‚óÄ Voltar para Home</a></li>
        </ul>
    </nav>
  </header>

  <video src="../imagens/background_video.mp4" autoplay muted loop preload="auto" id="background_video"></video>

  <main class="sales-container">
    <form method="POST" action="/submit-order" class="order-wrapper">

      <section class="config-column">
        <h1>Configure seu Servi√ßo</h1>

        <div class="input-group">
            <label>Tipo de Servi√ßo</label>
            <select id="service" name="service" required onchange="updatePrice()">
                <option value="elojob">Elo Job (Subir de Elo)</option>
                <option value="duojob">Duo Job (Jogar Comigo)</option>
                <option value="md5">MD5 (Melhor de 5)</option>
                <option value="coach">Aula / Coach</option>
            </select>
        </div>

        <div class="elo-selector-group">
            <div class="input-group">
                <label>Elo Atual</label>
                <select id="current_rank" name="rank" onchange="updatePrice()">
                    <option value="ferro">Ferro</option>
                    <option value="bronze">Bronze</option>
                    <option value="prata">Prata</option>
                    <option value="ouro">Ouro</option>
                    <option value="platina">Platina</option>
                    <option value="esmeralda">Esmeralda</option>
                    <option value="diamante">Diamante</option>
                </select>
            </div>

            <div class="arrow-separator">‚ûî</div>

            <div class="input-group">
                <label>Elo Desejado</label>
                <select id="desired_rank" name="desired_rank" onchange="updatePrice()">
                    <option value="ferro">Ferro</option>
                    <option value="bronze">Bronze</option>
                    <option value="prata">Prata</option>
                    <option value="ouro">Ouro</option>
                    <option value="platina">Platina</option>
                    <option value="esmeralda">Esmeralda</option>
                    <option value="diamante">Diamante</option>
                    <option value="mestre">Mestre</option>
                </select>
            </div>
        </div>

        <div class="input-group">
            <label>Seus Dados de Contato</label>
            <input type="text" name="name" placeholder="Seu Nome Completo" required>
            <input type="email" name="email" placeholder="Seu Melhor Email" required>
            <input type="tel" name="phone" placeholder="WhatsApp / Discord" required>
        </div>

        <div class="input-group">
            <label>Observa√ß√µes</label>
            <textarea name="comments" rows="3" placeholder="Ex: Mono champ, hor√°rios espec√≠ficos..."></textarea>
        </div>
      </section>

      <section class="summary-column">
        <div class="price-card">
            <h2>Resumo do Pedido</h2>
            <div class="summary-details">
                <p>De: <strong id="show-current">Ferro</strong></p>
                <p>Para: <strong id="show-desired">Ferro</strong></p>
                <p>Servi√ßo: <strong id="show-service">Elo Job</strong></p>
            </div>

            <hr>

            <div class="total-price">
                <small>Total Estimado</small>
                <span id="price-display">R$ 0,00</span>
            </div>

            <button type="submit" class="cta-button">Confirmar Pedido</button>
            <p class="security-note">üîí Pagamento seguro via PIX ou Cart√£o ap√≥s contato.</p>
        </div>
      </section>

    </form>
  </main>

  <script>
    // Tabela base de pre√ßos (valor acumulado de cada elo partindo do zero)
    // Ex: Chegar no Prata custa 50, chegar no Ouro custa 100.
    // O pre√ßo do servi√ßo √© (Destino - Origem).
    const rankValues = {
        'ferro': 0,
        'bronze': 40,
        'prata': 80,
        'ouro': 140,
        'platina': 220,
        'esmeralda': 350,
        'diamante': 550,
        'mestre': 900
    };

    function updatePrice() {
        const service = document.getElementById('service').value;
        const current = document.getElementById('current_rank').value;
        const desired = document.getElementById('desired_rank').value;

        // Atualiza textos do resumo
        document.getElementById('show-current').innerText = current.charAt(0).toUpperCase() + current.slice(1);
        document.getElementById('show-desired').innerText = desired.charAt(0).toUpperCase() + desired.slice(1);
        document.getElementById('show-service').innerText = service === 'elojob' ? 'Elo Job' : service.toUpperCase();

        let price = 0;

        if (service === 'elojob' || service === 'duojob') {
            // Calculadora simples: Valor Destino - Valor Origem
            let valCurrent = rankValues[current] || 0;
            let valDesired = rankValues[desired] || 0;

            if (valDesired > valCurrent) {
                price = valDesired - valCurrent;
            } else {
                price = 0; // N√£o cobra se o elo desejado for menor
            }

            // Se for Duo Job, cobra 40% a mais (exemplo)
            if (service === 'duojob') price *= 1.4;

        } else if (service === 'md5') {
            // Pre√ßo fixo para MD5 baseado no elo atual
            price = 60;
        } else if (service === 'coach') {
            price = 50; // Pre√ßo por hora
        }

        // Formatar para Real Brasileiro
        document.getElementById('price-display').innerText = price.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    }

    // Roda uma vez ao carregar
    updatePrice();
  </script>
</body>
</html>
